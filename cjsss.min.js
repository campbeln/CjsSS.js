/*
CjsSS.js v0.5e (kk) http://opensourcetaekwondo.com/cjsss
(c) 2014 Nick Campbell cjsssdev@gmail.com
License: MIT
Thanks jscompress.com!
*/
(function(e,t,n,r,i,s){"use strict";var o=false,u="cjsss",a=/<script.*?>([\s\S]*?)<\/script>/gi,f={options:{selector:"["+u+"], [data-"+u+"]",optionScope:"json",expose:false,async:true,scope:"isolated",crlf:"",d1:"{{",d2:"}}"},services:{},version:"v0.5e (kk)",data:{services:{},inject:{},cache:{}},process:function(){f.services.process.apply(this,arguments)},inject:function(){f.services.inject.apply(this,arguments)}},l=f.options,c=f.services,h=f.data.cache,p=f.data.inject,d=Object.prototype.toString;c.autorun=function(){if(l.selector){c.process(l.selector)}else{c.expose()}};c.dom=e.jQuery||function(e){try{return t.querySelectorAll(e)}catch(n){return[]}};c.expose=function(){if(!o){o=true;f=e[u]=c.extend(e[u],f);c.inject(u,f)}};c.extend=function(e){var t,n;e=c.is.obj(e)?e:{};for(t=1;t<arguments.length;t++){if(c.is.obj(arguments[t])){for(n in arguments[t]){if(arguments[t].hasOwnProperty(n)){e[n]=c.is.obj(arguments[t][n])?c.extend(e[n],arguments[t][n]):arguments[t][n]}}}}return e};c.get=function(e,t,n){var r=XMLHttpRequest||ActiveXObject,i;try{i=new r("MSXML2.XMLHTTP.3.0")}catch(s){}if(c.is.fn(n)){n={fn:n,arg:null}}if(i){i.onreadystatechange=function(){if(i.readyState===4){n.fn(i.status===200||i.status===0&&e.substr(0,7)==="file://",i.responseText,n.arg,i)}};i.open("GET",e,t);i.send()}else{n.fn(false,null,n.arg,i)}};c.getScripts=function(e){var t,n,r=e.match(a)||[],i=/<[\/]?script.*?>/gi,s=/<script.*?src=['"](.*?)['"].*?>/i,o=function(e,t,n){r[n]=e?t:""};for(n=0;n<r.length;n++){t=s.exec(r[n]);if(t&&t[1]){c.get(t[1],false,{fn:o,arg:n})}else{r[n]=r[n].replace(i,"")}}return r};c.is={str:function(e){return(typeof e==="string"||e instanceof String)&&e!==""},fn:function(e){return d.call(e)==="[object Function]"},obj:function(e){return e&&e===Object(e)&&!c.is.fn(e)},arr:function(e){return d.call(e)==="[object Array]"}};c.inject=function(e,t){var n=c.is.str(e);if(n){p[e]=t}return n};c.mixinFactory=function(e){return function(t,n){var r="";if(c.is.obj(t)){r=(n?(c.is.str(n)?n:t._selector)+" {":"")+e+c.toCss(t,e)+e+(n?"}":"")}return r}};c.toCss=function(e,t){var n,r,i="";for(n in e){if(e.hasOwnProperty(n)&&n!=="_selector"){r=e[n];n=n.replace(/([A-Z])/g,"-$1").toLowerCase();n=n.indexOf("-")===0?n.substr(1):n;if(c.is.obj(r)){i+=c.toCss(r,t)}else{i+=n+":"+r+";"+t}}}return i};c.newId=function(e){var n;e=e||u+"_";do{n=Math.random().toString(36).substr(2,5)}while(t.getElementById(e+n));return e+n};c.process=function(e,n){function m(e,t){if(!h[e]){h[e]={run:p.scope==="local"||p.scope==="useStrict"?-1:1,scripts:c.getScripts(t),id:e,css:t,options:c.evalFactory[p.optionScope]()(o),evaler:c.evalFactory[p.scope]()}}p=c.extend({},l,h[e].options,n);if(p.expose){c.expose()}c.inject("mixin",c.mixinFactory(p.crlf))}var r,i,s,o,a,f=[],p=c.extend({},l,n),d=function(e){return typeof this[e]!=="undefined"},v=function(e,n,r){if(e){var i=t.createElement("style");i.type="text/css";i.setAttribute(r.attr,r.$link.getAttribute(r.attr)||"");r.$link.parentNode.replaceChild(i,r.$link);i.id=r.id;h[r.id].css=n;m(a);c.processCSS(i,p)}};if(e){if(c.is.str(e)){f=c.dom(e)}else{f=e[0]&&e.length?e:[e]}}else if(c.is.str(p.selector)){f=c.dom(p.selector)}for(r=0;r<f.length;r++){i=f[r];i.hasAttribute=i.hasAttribute||d;s=(i.hasAttribute("data-"+u)?"data-":"")+u;o=i.getAttribute(s)||"{}";a=i.id=i.id||c.newId();switch(i.tagName.toLowerCase()){case"style":{m(a,i.innerHTML);c.processCSS(i,p);break};case"link":{m(a);c.get(i.href,p.async,{fn:v,arg:{$link:i,attr:s,id:a,o:p}});break};default:{if(!h[a]){h[a]={id:a,css:i.getAttribute("style"),options:c.evalFactory[p.optionScope]()(o.indexOf("{")===0?o:'{ "selector": "'+o+'" }')}}p=c.extend({},l,h[a].options,n);h[a].parent=h[c.dom(p.selector)[0].id];if(h[a].parent){c.processCSS(i,c.extend({},l,h[a].parent.options,h[a].options,n),true)}else{c.warn("Unable to locate parent element for: ",i)}}}}return f};c.processCSS=function(e,t,n){function d(t){s=l[0];for(r=1;r<l.length;r++){s+=t.results[l[r].i]+l[r].s}if(n){e.setAttribute("style",s)}else{if(e.styleSheet){e.styleSheet.cssText=s}else{e.innerHTML=s}}if(t.errors.length>0){c.warn("Errors occured processing the Javascript for: ",e,t.errors)}}var r,i,s,o=[],u=e.id,f=h[u].parent||h[u],l=h[u].css.replace(a,"").replace(new RegExp("/\\*"+t.d1,"g"),t.d1).replace(new RegExp(t.d2+"\\*/","g"),t.d2).split(t.d1);if(f.run!==0){f.run--;o=f.scripts}for(r=1;r<l.length;r++){i=l[r].split(t.d2);l[r]={i:o.push(i.shift())-1,s:i.join(t.d2)}}u=f.evaler(o,p,true);c.is.fn(u.then)?u.then(d):d(u)};c.warn=function(e,t,n){var r=console;(r?r.warn||r.log:function(){})(u+": "+e,t,n||"")};f.data.services=c.extend({},c);if(c.is.obj(e[u])){if(c.is.fn(e[u].servicesFactory)){c.extend(c,e[u].servicesFactory(f))}c.extend(l,e[u].options)}c.evalFactory=c.evalFactory||n(e,t,c,r,i,s);c.autorun()})(window,document,function(e,t,n,r,i,s){"use strict";function f(e){var t="try{return(function(g,Object){return((1,eval)('Object')===g?function(){return(1,eval)(arguments[0]);}:(window.execScript?function(){return window.execScript(arguments[0]);}:undefined));})(Object,{});}catch(e){return undefined;}";if(e){return t}else if(a===null){a=(new Function(t))()}}function l(e,t,r){return function(i,s,o){var u,a=n.is.arr(i),f={js:a?i:[i],results:[],errors:[]};if(t&&n.is.obj(s)){for(u in s){if(s.hasOwnProperty(u)){t[u]=t[u]||s[u]}}}for(u=0;u<f.js.length;u++){try{f.results.push(r?e.call(t,f.js[u]):e(f.js[u]))}catch(l){f.results.push(undefined);f.errors.push({index:u,error:l,js:f.js[u]})}}return o?f:a?f.results:f.results[0]}}function c(e,r,i){var s=n.newId("sandbox");e=e===null?"":' sandbox="'+(e?e:"allow-scripts")+'"';(i||t.body||t.head||t.getElementsByTagName("head")[0]).insertAdjacentHTML("afterbegin",'<iframe src="'+r+'" id="'+s+'" style="display:none;"'+e+"></iframe>");return t.getElementById(s)}function h(t,s,u){var p,d=s!==undefined&&s!==null;s=d?s:e;switch(t){case"g":{if(s===e){f();p=!a&&u.f?r:a;if(p){return l(p,e)}}else if(n.is.fn(s.eval)){p=s.eval("(function(){"+f(true)+"})()");p=!p&&u.f?function(){return s.eval(arguments[0])}:p;if(p){return u.r?p:l(p,s)}}break};case"l":{return l(r,s,d)};case"u":{return l(i,s,d)};case"i":{u=n.is.obj(u)?u:{};u.iframe=c(null,"");u.window=u.iframe.contentWindow;p=h("g",u.window,{f:1,r:1});return l(p,d?s:u.window,d)};case"j":{return l(o)}}}var o,u="v0.5e",a=null;if(e.JSON&&e.JSON.parse){o=e.JSON.parse}else if(e.jQuery&&e.jQuery.parseJSON){o=e.jQuery.parseJSON}return{version:u,global:function(t,n){return h("g",n||e,{f:t})},local:function(e){return h("l",e)},useStrict:function(e){return h("u",e)},isolated:function(e,t){return h("i",e,t)},json:!o?undefined:function(){return h("j")},sandbox:!s?undefined:s(e,n,{looper:l,iframe:c})}},function(){return eval(arguments[0])},function(){"use strict";return eval(arguments[0])},function(e,t,n){"use strict";function u(n,u,a,f){if(!s){s=true;e.addEventListener=e.addEventListener||function(t,n){e.attachEvent("on"+t,n)};e.addEventListener("message",function(n){var s;i=t.is.str(n.data);if(n.origin==="null"&&r[s.id]){s=i?e.JSON.parse(n.data):n.data;r[s.id](n.source,{results:s.r,errors:s.e,js:s.js},s.arg);delete r[s.id]}},false);try{e.postMessage({},"*")}catch(l){i=true}}return function(s,a,l){var c=t.is.arr(s);return{then:function(t,h){var p={js:c?s:[s],id:o++,arg:h,type:n,context:u,inject:a};r[o]=function(e,n,r){if(e===f){t(l?n:c?n.results:n.results[0],r)}};f.postMessage(i?e.JSON.stringify(p):p,"*")}}}}function a(t){var r=t.contentWindow,i=e.postMessage&&(t.getAttribute("sandbox")+"").indexOf("allow-same-origin")===-1,s=i?u:n.looper;return{iframe:t,window:r,secure:i,global:function(e){var t=e?"isolated":"global";return s(i?t:r.$sandbox[t],r)},local:function(e){var t=arguments.length===1,n=t?"context":"local";return s(i?n:r.$sandbox[n],e||r,t,r)}}}var r=[],i=false,s=false,o=0;return function(e,t,r){switch(arguments.length){case 1:{a(e);break};case 2:case 3:{a(n.iframe(e,t,r));break}}}})
