/*
CjsSS.js v0.9i (kk) http://opensourcetaekwondo.com/cjsss
(c) 2014-2015 Nick Campbell cjsssdev@gmail.com
License: MIT
Thanks jscompress.com!
*/
!function(e,t,r,n,s,o,a,i){var c=function(t){"use strict";var n="cjsss",s=window,o=!1,a=/<script.*?>([\s\S]*?)<\/script>/gi,i={version:"v0.9i",options:{selector:"["+n+"],[data-"+n+"],LINK[type='text/"+n+"'],STYLE[type='text/"+n+"']",optionScope:"json",scope:"isolated",expose:!0,async:!0,rescope:!1,d1:"[[",d2:"]]"},data:{cache:t.cache,inject:{},services:{}},services:t,process:function(){t.js.process.apply(this,arguments)},mixin:function(){t.mixin.apply(this,arguments)},inject:function(){t.js.inject.apply(this,arguments)}},c=i.options,u=i.data.inject;t.version[n]=i.version,t.extend(t,{js:{autorun:function(){c.selector?t.js.process(c.selector):t.js.expose()},dom:e||function(e){try{return r.querySelectorAll(e)}catch(t){return[]}},expose:function(){o||(o=!0,i=s[n]=t.extend(s[n],i),t.js.inject(n,i))},inject:function(e,r){var n=t.is.str(e);return n&&(u[e]=r),n},interpolate:function(e,r){var n,s,o=e.css,i=[],c=o.replace(a,"").split(r.d1);for(n=1;n<c.length;n++)s=c[n].split(r.d2),c[n]={i:i.push(s.shift())-1,s:s.join(r.d2)};return function(){function r(r){var s=c[0];for(n=1;n<c.length;n++)s+=r.results[c[n].i+o]+c[n].s;return"*"===e.tag?l.setAttribute("style",s):l.styleSheet?l.styleSheet.cssText=s:l.innerHTML=s,r.errors.length>0&&t.warn("Errors occurred processing the Javascript for: ",l,r.errors),s}var s,o,a=[],l=e.dom,f=e.parent;return f&&f.scripts&&0!==f.evaler.run&&(f.evaler.run--,a=a.concat(f.scripts)),e&&e.scripts&&0!==e.evaler.run&&(e.evaler.run--,a=a.concat(e.scripts)),o=a.length,a=a.concat(i),s=e.evaler.$eval(a,u,!0),t.is.fn(s.then)?void s.then(r):r(s)}},process:function(e,r){var n,s=[],o=[],a=t.extend({},c,r);for(e?s=t.is.str(e)?t.js.dom(e):e[0]&&e.length?e:[e]:t.is.str(a.selector)&&(s=t.js.dom(a.selector)),a.expose&&t.js.expose(),n=0;n<s.length;n++)o=o.concat(t.compile.element(s[n],a,function(e){e.$interpolate=t.js.interpolate(e,a),t.compile.options(e,c,function(){function r(){t.updateCSS(e)}r()})}));return o},conf:function(){t.config.attr=n,i.data.services=t.extend({},t),t.is.obj(s[n])&&(t.is.fn(s[n].servicesFactory)&&t.extend(t,s[n].servicesFactory(i)),t.extend(c,s[n].options)),t.js.inject("mixin",t.mixin),t.js.autorun()}}}),t.js.conf()};n(t,r,c,s,o,a,i)}(window.jQuery,window,document,function(e,t,r,n,s,o,a){"use strict";function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c,u=this,l={},f={},p=Object.prototype.toString,g=/<script.*?>([\s\S]*?)<\/script>/gi,v={version:{baseServices:"v0.9i"},config:{attr:"",scopeAlias:"scope",expandAttr:'{ "$scopeAlias": "$attr" }'},cache:l,coc:f,compile:{setCache:function(e,t,r,n,s){var o="*"===n,a=s||e,c=new RegExp("/\\*"+i(t.d1),"g"),u=new RegExp(i(t.d2)+"\\*/","g"),f={link:s||null,dom:e,tag:n,options:v.compile.getOptions(a,o?"":r),scripts:o?null:v.compile.getScripts(a,r),ovaler:v.fn.code(v.compile.getEvaler(f,v.scope.resolve(f,t,"optionScope"),"o"),e),css:(r||"").replace(g,"").replace(c,t.d1).replace(u,t.d2)};l[a.id]=f},element:function(e,r,n,s){var o,a=!1,i=[e];if(o=e.id=e.id||v.newId(),l[o])v.compile.setEvaler(l[o],r,n,i);else{switch(e.tagName.toLowerCase()){case"style":v.compile.setCache(e,r,e.innerHTML,"s"),e.innerHTML="";break;case"link":a=!0,v.get(e.href,v.resolve(v.compile.prevaler(v.compile.getOptions(e).a,r),"async")||r.async,function(a,c){if(a){var u=t.createElement("style");u.appendChild(t.createTextNode("")),v.compile.setCache(u,r,c,"l",e),u.type="text/css",u.setAttribute(l[o].options.attr,l[o].options.a),e.parentNode.replaceChild(u,e),e=u,u.id=o,v.compile.setEvaler(l[o],r,n,i,s)}else v.warn("Error retrieving `"+e.href+"` for",e,c),n(void 0,i)});break;default:v.compile.setCache(e,r,e.getAttribute("style"),"*"),e.removeAttribute("style")}a||v.compile.setEvaler(l[o],r,n,i,s)}return i},getEvaler:function(e,t,r,n){var s,o=t.s;return v.is.fn(v.evalFactory[o])?s="sandbox"===o?v.evalFactory[o](v.evaler.iframeFactory("allow-scripts","")).global():v.evalFactory[o](t.c):v.is.fn(v.config.getEvaler)&&(s=v.config.getEvaler(o)),v.is.fn(s)||n!==!0||v.warn("Invalid "+r+"valer `"+o+"` for",e.dom),s},setEvaler:function(e,r,n,s,o){function a(t,r,n,s){var o=e.scripts||[],a=0;m=!0,o.length>0&&(n=(n||"").substr(0,1),a="l"===n||"u"===n?-1:n.length),e.evaler={parent:t,scope:r,context:g.c,$eval:s,run:a}}var i,c,u=e.dom,p=u.id,g=v.scope.resolve(e,r,v.config.scopeAlias),d=g.s,m=!1,h=!1;g.go&&(v.is.str(d)?e.evaler&&e.evaler.scope===d&&e.evaler.context===g.c?m=!0:"#"!==d.substr(0,1)?(c=v.compile.getEvaler(e,g,"e",o),v.is.fn(c)&&a(null,d,d,c)):(i=l[d.substr(1)],i?v.is.fn(v.resolve(i,"evaler.$eval"))?a(i,d,i.evaler.scope,i.evaler.$eval):v.warn("Invalid evaler `"+d+"` for",u):(i=t.getElementById(d.substr(1)),i?(h=!0,v.compile.element(i,r,function(t,r){v.is.obj(t)&&a(t,d,t.evaler.scope,t.evaler.$eval),n(e,s.concat(r)),v.is.fn(f[p])&&f[p]()})):v.warn("Unknown parent `"+d+"` for",u))):o===!0&&v.warn("Invalid scope `"+d+"` for",u,d)),m||a(),h||(n(e,s),v.is.fn(f[p])&&f[p]())},options:function(e,t,r){function n(t){t&&(t.a&&!t.$a&&(t.$a=e.ovaler(t.a)),t.c&&!t.$c&&(t.$c=e.ovaler(t.c)))}v.compile.element(e.dom,t,function(s){var o;"*"===s.tag&&e.dom.setAttribute(s.options.attr,s[v.config.attr]),o=v.resolve(s,"evaler.parent.options")||{},n(o),n(s.options),r(v.extend({},t,o.$c,o.$a,s.options.$c,s.options.$a))})},getOptions:function(e,t){e.hasAttribute=e.hasAttribute||v.hasAttribute;var r,n=v.config.attr,s=new RegExp("^\\s*\\/\\*"+i(v.config.attr)+"\\((\\{.*?\\})\\)\\*\\/","i"),o=e.hasAttribute(n)?n:"data-"+n,a=e.getAttribute(o)||"",c={attr:o,a:a?0===a.indexOf("{")?a:v.config.expandAttr.replace(/\$scopeAlias/g,v.config.scopeAlias).replace(/\$attr/g,a.replace(/'/g,"\\'")):"{}"};return t&&(r=t.match(s),r&&r[1]&&(c.c=r[1])),c},prevaler:function(e,t){return c||(c=v.fn.code(v.compile.getEvaler({dom:u},v.scope.resolve({dom:u},t,"optionScope",!0),"o"),v.compile.prevaler)),c(e)},getScripts:function(e,t){var r,n,s=(t||"").match(g)||[],o=/<[\/]?script.*?>/gi,a=/<script.*?src=['"](.*?)['"].*?>/i,i=function(t,r,n){s[n.i]=t?r:"",t||v.warn("Error retrieving `"+n.src+"` for",e,r)};for(n=0;n<s.length;n++)r=a.exec(s[n]),r&&r[1]?v.get(r[1],!1,{fn:i,arg:{i:n,src:r[1]}}):s[n]=s[n].replace(o,"");return s}},extend:function(e){var t,r;for(e=v.is.obj(e)?e:{},t=1;t<arguments.length;t++)if(v.is.obj(arguments[t]))for(r in arguments[t])arguments[t].hasOwnProperty(r)&&(e[r]=v.is.obj(arguments[t][r])?v.extend(e[r],arguments[t][r]):arguments[t][r]);return e},fn:{safe:function(e,t,r){return v.is.fn(e)?e.apply(r||u,v.is.arr(t)?t:[t]):void 0},option:function(e,t){return v.fn.safe(e,[t.dom,t])},code:function(e,t){return function(r){try{return e(r)}catch(n){return v.warn("Error evaluating `"+r+"` for",t,n),{}}}}},get:function(e,t,r){var n,s=XMLHttpRequest||ActiveXObject;try{n=new s("MSXML2.XMLHTTP.3.0")}catch(o){}v.is.fn(r)&&(r={fn:r,arg:null}),n?(n.onreadystatechange=function(){4===n.readyState&&r.fn(200===n.status||0===n.status&&"file://"===e.substr(0,7),n.responseText,r.arg,n)},n.open("GET",e,t),n.send()):r.fn(!1,null,r.arg,n)},hasAttribute:function(e){return"undefined"!=typeof this[e]},is:{arr:function(e){return"[object Array]"===p.call(e)},dom:function(e){return e&&v.is.str(e.tagName)&&v.is.fn(e.getAttribute)},fn:function(e){return"[object Function]"===p.call(e)},jq:function(e){return e&&v.is.fn(e.replaceWith)&&v.is.dom(e[0])},obj:function(e){return e&&e===Object(e)&&!v.is.fn(e)},str:function(e){return("string"==typeof e||e instanceof String)&&""!==e}},mixin:function(e,t,r){function n(e,t){var r,s,o="";for(r in e)e.hasOwnProperty(r)&&"_selector"!==r&&(s=e[r],r=r.replace(/([A-Z])/g,"-$1").toLowerCase(),r=0===r.indexOf("-")?r.substr(1):r,o+=v.is.obj(s)?n(s,t):r+":"+s+";"+t);return o}var s="",o=r?"\n":"";return v.is.obj(e)&&(s=(t?(v.is.str(t)?t:e._selector)+" {":"")+o+n(e,o)+o+(t?"}":"")),s},newId:function(e){var r;e=e||v.config.attr+"_";do r=e+Math.random().toString(36).substr(2,5);while(t.getElementById(r));return r},resolve:function(e,t){var r,n;if(e=v.is.obj(e)?e:void 0,e&&v.is.str(t))for(r=t.split("."),n=0;n<r.length;n++){if(!(v.is.obj(e)&&r[n]in e)){e=void 0;break}e=e[r[n]]}return e},runScripts:function(e,t,r){var n,s=e.scripts||[],o=v.resolve(e,"evaler.parent");return t.script!==!1&&0!==e.evaler.run&&(o&&v.is.arr(o.scripts)&&0!==o.evaler.run&&(s=o.scripts.concat(s),o.evaler.run--),n=e.evaler.$eval(s,r,!0),e.evaler.run--,n.errors.length>0&&v.warn("Error evaluating Javascript for",e.dom,n.errors)),n},scope:{resolve:function(e,t,r,n){var s=v.resolve(e,"options.a"),o=v.scope.$({s:n!==!0?v.resolve(v.compile.prevaler(s,t),r)||t[r]:t[r],go:!0},e,v.config.scopeAlias);if(o.c)switch((o.s||"").toLowerCase()){case"local":case"usestrict":break;default:v.warn("Context cannot be used with `"+o.s+"`",e.dom)}return o},hook:function(e){return e},$:function(e,t,r){return v.is.fn(e.s)&&(e.s=v.fn.option(e.s,t)),v.is.obj(e.s)&&(e.s=v.is.jq(e.s)?e.s[0]:e.s,v.is.dom(e.s)?(e.s.id=e.s.id||v.newId(),e.s="#"+e.s.id):r in e.s&&"context"in e.s?(e.c=e.s.context,e.s=e.s[r]):(e.c=e.s,e.s="local")),e=v.scope.hook(e),(v.is.obj(e.s)||v.is.fn(e.s))&&(e=v.scope.$(e,t,r)),e}},updateCSS:function(e){try{var t=e.$interpolate();"*"===e.tag?e.dom.style.cssText=t:e.dom.innerHTML=t,v.fn.option(e.callback,e)===!1&&(e.callback=null)}catch(r){v.warn("Error updating CSS for",e.dom,r)}},warn:function(e,t,r){var n=console||function(){};(n.warn||n.log||n)(v.config.attr+": "+e,t,r)}};v.evalFactory=n(e,t,v,s,o,a),r(v)},function(e,t,r,n,s,o){"use strict";function a(e){var t="try{return(function(g,Object){return((1,eval)('Object')===g?function(){return(1,eval)(arguments[0]);}:(window.execScript?function(){return window.execScript(arguments[0]);}:undefined));})(Object,{});}catch(e){return undefined;}";return e?t:void(null===p&&(p=new Function(t)()))}function i(e,t,o,a){return function(i,c,u){var l,f=r.is.arr(i),p=r.is.obj(c),g={js:f?i:[i],results:[],errors:[]};switch(e){case n:case s:Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}),a?e.call(o,g,0,p?{o:c,k:Object.keys(c),c:""}:null):e(g,0,p?{o:c,k:Object.keys(c),c:""}:null);break;default:if(t&&p)for(l in c)void 0===t[l]&&c.hasOwnProperty(l)&&(t[l]=c[l]);for(l=0;l<g.js.length;l++)try{g.results.push(e(g.js[l]))}catch(v){g.results.push(void 0),g.errors.push({index:l,error:v,js:g.js[l]})}}return u?g:f?g.results:g.results[0]}}function c(e,n,s){var o=r.newId("sandbox");return e=null===e?"":' sandbox="'+(e?e:"allow-scripts")+'"',(s||t.body||t.head||t.getElementsByTagName("head")[0]).insertAdjacentHTML("afterbegin",'<iframe src="'+n+'" id="'+o+'" style="display:none;"'+e+"></iframe>"),t.getElementById(o)}function u(t,o,f){var g,v,d="eval",m=void 0!==o&&null!==o;switch(o=m?o:e,t){case"g":o===e?(a(),g=!p&&f.f?n:p,g&&(v=i(g,e))):r.is.fn(o[d])&&(g=o[d]("(function(){"+a(!0)+"})()"),g=!g&&f.f?function(){return o[d](arguments[0])}:g,g&&(v=f.r?g:i(g,o)));break;case"l":v=i(n,e,o,m);break;case"u":v=i(s,e,o,m);break;case"i":f=r.is.obj(f)?f:{},f.iframe=c(null,""),f.window=f.iframe.contentWindow,g=u("g",f.window,{f:1,r:1});var h=i(g,f.window);v=function(e,t,r){return h(e,t,r)};break;case"j":v=i(l)}return v}var l,f="v0.9f",p=null;return r.version.evaler=f,r.extend(r,{evaler:{iframeFactory:c}}),e.JSON&&e.JSON.parse?l=e.JSON.parse:e.jQuery&&e.jQuery.parseJSON&&(l=e.jQuery.parseJSON),{$version:f,global:function(t,r){return u("g",r||e,{f:t})},local:n?function(e){return u("l",e)}:void 0,useStrict:s?function(e){return u("u",e)}:void 0,isolated:function(e){return u("i",null,e)},json:l?function(){return u("j")}:void 0,sandbox:o?o(e,r,{looper:i,iframe:c}):void 0}},function(){if(arguments[2])for(;arguments[2].k.length>0;)arguments[2].c=arguments[2].k.shift(),eval("var "+arguments[2].c+"=arguments[2].o[arguments[2].c];");for(;arguments[1]<arguments[0].js.length;){try{eval(arguments[0].js[arguments[1]])}catch(e){arguments[0].results.push(void 0),arguments[0].errors.push({index:arguments[1],error:e,js:arguments[0].js[arguments[1]]})}arguments[1]++}},function(){if(arguments[2])for(;arguments[2].k.length>0;)arguments[2].c=arguments[2].k.shift(),eval("var "+arguments[2].c+"=arguments[2].o[arguments[2].c];");!function(){"use strict";for(;arguments[1]<arguments[0].js.length;){try{eval(arguments[0].js[arguments[1]])}catch(e){arguments[0].results.push(void 0),arguments[0].errors.push({index:arguments[1],error:e,js:arguments[0].js[arguments[1]]})}arguments[1]++}}(arguments[0],0,arguments[2])},function(e,t,r){"use strict";function n(r,n){var s=arguments[3];if(!i){i=!0,e.addEventListener=e.addEventListener||function(t,r){e.attachEvent("on"+t,r)},e.addEventListener("message",function(r){var n;a=t.is.str(r.data),n=a?e.JSON.parse(r.data):r.data,"null"===r.origin&&o[n.id]&&(o[n.id](r.source,{results:n.r,errors:n.e,js:n.js},n.arg),delete o[n.id])},!1);try{e.postMessage({},"*")}catch(u){a=!0}}return function(i,u,l){var f=t.is.arr(i);return{then:function(t,p){var g={js:f?i:[i],id:c++,arg:p,type:r,context:n,inject:u};o[c]=function(e,r,n){e===s&&t(l?r:f?r.results:r.results[0],n)},s.postMessage(a?e.JSON.stringify(g):g,"*")}}}}function s(t){var s=t.contentWindow,o=e.postMessage&&-1===(t.getAttribute("sandbox")+"").indexOf("allow-same-origin"),a=o?n:r.looper;return{iframe:t,window:s,secure:o,global:function(e){var t=e?"isolated":"global";return a(o?t:s.$sandbox[t],s)},local:function(e){var t=1===arguments.length,r=t?"context":"local";return a(o?r:s.$sandbox[r],e||s,t,s)}}}var o=[],a=!1,i=!1,c=0;return function(e,t,n){switch(arguments.length){case 0:s(r.iframe("allow-scripts",""));break;case 1:s(e);break;case 2:case 3:s(r.iframe(e,t,n))}}});
